#!/scratch/timo/prerequisites-10.0/bin/python
#This script was generated by the AMUSE framework
import sys
import os

from mpi4py import rc
rc.initialize = False
from mpi4py import MPI


if __name__ == '__main__':

    if len(sys.argv) > 1:

        portnumber = int(sys.argv[1])
        host = sys.argv[2]
        usempi= sys.argv[3]

        if usempi=="true":
            MPI.Init()

        try:
            syspath = ('','/scratch/timo/Code/CygnusAMerger/notebooks','/scratch/timo/amuse-10.0/test','/scratch/timo/amuse-10.0/src','/scratch/timo/prerequisites-10.0/lib/python27.zip','/scratch/timo/prerequisites-10.0/lib/python2.7','/scratch/timo/prerequisites-10.0/lib/python2.7/plat-linux2','/scratch/timo/prerequisites-10.0/lib/python2.7/lib-tk','/scratch/timo/prerequisites-10.0/lib/python2.7/lib-old','/scratch/timo/prerequisites-10.0/lib/python2.7/lib-dynload','/scratch/timo/prerequisites-10.0/lib/python2.7/site-packages/Sphinx-1.3.5-py2.7.egg','/scratch/timo/prerequisites-10.0/lib/python2.7/site-packages','/scratch/timo/prerequisites-10.0/lib/python2.7/site-packages/setuptools-20.3-py2.7.egg','/scratch/timo/prerequisites-10.0/lib/python2.7/site-packages/IPython/extensions','/home/timo/.ipython')
            existing_syspath = set(sys.path)
            for x in syspath:
                if not x in existing_syspath:
                      sys.path.append(x)
    
            from amuse.rfi import core
    
            from amuse.community.galactics.interface import GalactICsImplementation
            from amuse.community.galactics.interface import GalactICsInterface
    
            instance = GalactICsImplementation()
    
            from amuse.rfi.python_code import PythonImplementation
    
            x = PythonImplementation(instance, GalactICsInterface)
    
            x.start_socket(portnumber, host)
        finally:  
            if usempi:
                MPI.Finalize()

    else:

        MPI.Init()

        try:
            syspath = ('','/scratch/timo/Code/CygnusAMerger/notebooks','/scratch/timo/amuse-10.0/test','/scratch/timo/amuse-10.0/src','/scratch/timo/prerequisites-10.0/lib/python27.zip','/scratch/timo/prerequisites-10.0/lib/python2.7','/scratch/timo/prerequisites-10.0/lib/python2.7/plat-linux2','/scratch/timo/prerequisites-10.0/lib/python2.7/lib-tk','/scratch/timo/prerequisites-10.0/lib/python2.7/lib-old','/scratch/timo/prerequisites-10.0/lib/python2.7/lib-dynload','/scratch/timo/prerequisites-10.0/lib/python2.7/site-packages/Sphinx-1.3.5-py2.7.egg','/scratch/timo/prerequisites-10.0/lib/python2.7/site-packages','/scratch/timo/prerequisites-10.0/lib/python2.7/site-packages/setuptools-20.3-py2.7.egg','/scratch/timo/prerequisites-10.0/lib/python2.7/site-packages/IPython/extensions','/home/timo/.ipython')
            existing_syspath = set(sys.path)
            for x in syspath:
                if not x in existing_syspath:
                    sys.path.append(x)

            from amuse.rfi import core

            from amuse.community.galactics.interface import GalactICsImplementation
            from amuse.community.galactics.interface import GalactICsInterface

            instance = GalactICsImplementation()

            from amuse.rfi.python_code import PythonImplementation

            x = PythonImplementation(instance, GalactICsInterface)
            x.start()
        finally:
            MPI.Finalize()
